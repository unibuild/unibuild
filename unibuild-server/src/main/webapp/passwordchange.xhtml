<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>
<h:body>
	<h:form id="passwordChangeForm" prependId="false">



		<p:panel header="UniBuild Server password change" style="width:400px;">
			<p:messages id="messages" showDetail="true" autoUpdate="true"
				showSummary="false" />
			   

			<h:panelGrid columns="2" id="passwordChangeCodeGrid" rendered="#{not passwordChangeBean.codeValid}">
				<h:outputLabel for="code" value="Password change code *" />
				<p:inputText id="code" value="#{passwordChangeBean.code}"
					label="Password change code" required="true" 
					requiredMessage="Password change code is required"/>
	                         
			</h:panelGrid>
			
			<h:panelGrid columns="2" id="passwordChangeGrid" rendered="#{passwordChangeBean.codeValid}">
				<h:outputLabel for="password" value="New password *" />
				<p:password id="password" value="#{passwordChangeBean.password}"
					label="New password" required="true" 
					requiredMessage="New password is required"/>
	            
	            <h:outputLabel for="passwordAgain" value="Password again *" />
	            <p:password id="passwordAgain" value="#{passwordChangeBean.passwordAgain}"
					label="Password confirmation" required="true" 
					requiredMessage="Password confirmation is required" />            
			</h:panelGrid>
			<p:commandButton id="passwordChange" ajax="false"
				actionListener="#{passwordChangeBean.changePassword}" value="Change password" rendered="#{not passwordChangeBean.success and passwordChangeBean.codeValid}"
				/>
			<p:commandButton id="validateCode" ajax="false"
				actionListener="#{passwordChangeBean.validateCode}" value="Validate code" rendered="#{not passwordChangeBean.success and not passwordChangeBean.codeValid}"
				/>
			<br/>
			<a href="login.xhtml">Login</a>
		</p:panel>



	</h:form>
</h:body>
</html>


